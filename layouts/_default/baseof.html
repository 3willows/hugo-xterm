<!DOCTYPE html>
<html lang="{{ $.Site.Language }}">
  <head>
    {{ block "title" . }}
    <title>
      {{ if .IsHome }}
        {{ $.Site.Title }}
      {{ else }}
        {{ if .Title }}
          {{ .Title }}
        {{ else }}
          {{ .File.TranslationBaseName }}
        {{ end }}
        :: {{ $.Site.Title }}
      {{ end }}
    </title>
    {{ end }}

    {{ block "head" . }}
      {{ partial "head/meta.html" . }}
      {{ partial "head/icons.html" . }}
      {{ partial "head/fonts.html" . }}
      {{ block "head_style" . }}
        {{ partial "head/style.html" . }}
      {{ end }}
      {{ partial "head/share.html" . }}
      {{ partial "head/feed.html" . }}
    {{ end }}
  </head>

  <body class="{{- $.Site.Params.ThemeColor -}}">
    {{ block "container" . }}
    {{ $container := "container" }}
    {{ if $.Site.Params.FullWidthTheme }}
      {{ $container = print $container " full" }}
    {{ else if $.Site.Params.CenterTheme }}
      {{ $container = print $container " center" }}
    {{ end }}
    <div class="{{- $container -}}">

      <header>
      {{ block "header" . }}
        {{ partial "header.html" . }}
      {{ end }}

      {{ block "header_extra" . }}
      {{ end }}
      </header>

      <main>
        {{ block "main" . }}
          {{ if .Title }}
          <h1 class="post-title">{{ .Title | plainify }}</h1>
          {{ end }}
          {{ .Content }}
        {{ end }}
      </main>

      <footer class="footer">
      {{ block "footer_extra" . }}
      {{ end }}

      {{ block "footer" . }}
        {{ partial "footer.html" . }}
      {{ end }}
      </footer>

    </div>
    {{ end }}

    {{ block "scripts" . }}
      {{ $menu := resources.Get "js/menu.js" | js.Build }}
      {{ $prism := resources.Get "js/prism.js" | js.Build }}
      {{ $bundle := slice $menu $prism | resources.Concat "bundle.js" | resources.Minify }}
      <script type="text/javascript" src="{{ $bundle.RelPermalink }}"></script>
    {{ end }}
  </body>
</html>
